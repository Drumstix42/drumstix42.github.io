var E=Object.defineProperty,A=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var $=(t,e,a)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))M.call(e,a)&&$(t,a,e[a]);if(R)for(var a of R(e))V.call(e,a)&&$(t,a,e[a]);return t},k=(t,e)=>A(t,j(e));import{C as B,D as q,E as w,o as l,d as g,w as i,r as o,e as c,a as r,t as v,G as z,c as h,H as F,I as G,J as P,f as S,K as U,F as H,b as J}from"./vendor.1dd11450.js";import{_ as C}from"./index.2c2cd30c.js";Object.freeze({1:"1"});function K(t=[]){const e={};return t.forEach(a=>{const s=a.Name;e[s]={label:s,value:s,inputs:[],sources:[],quantity:1},(a.Inputs||[]).forEach(n=>{e[s].inputs.push({itemName:n.Element.RowName,quantity:n.Count})}),(a.RecipeSets||[]).forEach(n=>{e[s].sources.push(n.RowName)}),(a.Outputs||[]).forEach(n=>{(s===n.Element.RowName||s.includes(n.Element.RowName))&&(e[s].quantity=n.Count)})}),e}const Q=()=>Date.now(),D=()=>B({id:Q(),title:"Planning",items:[]}),L=(t,e)=>e.findIndex(a=>a.id===t),N=D(),W=N.id,b=q("icarus",{state:()=>({activeTabId:W,tabs:[N],recipeData:{},recipeOptions:[],isLoadingRecipes:!1}),getters:{activeTab:t=>t.tabs.find(e=>e.id===t.activeTabId),tabCount(){return this.tabs.length},sortedRecipeOptions(t){return t.recipeOptions.sort((e,a)=>e.label.localeCompare(a.label))}},actions:{addTab(){const t=D();this.tabs.push(t)},removeTab(t){const e=L(t,this.tabs);if(e!==-1)this.tabs.splice(e,1);else{console.error(`Could not find tab with id ${t}`,this.tabs);return}const a=Math.min(e,this.tabs.length-1),s=this.tabs[a];this.activeTabId=s.id},setActiveTab(t){this.activeTabId=t},setTabTitle(t,e){const a=L(t,this.tabs);a!==-1&&(this.tabs[a].title=e)},async loadRecipeData(){this.isLoadingRecipes=!0;const e=await(await fetch("/Icarus/Data/Recipes.json",{method:"GET",headers:{"Content-Type":"application/json"}})).json(),a=K(e==null?void 0:e.Rows);console.log(a),this.recipeData=a,this.recipeOptions=Object.values(a),this.isLoadingRecipes=!1}}});const X={name:"CraftingToolItemSelector",components:{},props:{},data(){return{isOpen:!1,value:null}},computed:f({},w(b,["sortedRecipeOptions","isLoadingRecipes"])),methods:{}},Y={class:"flex align-items-center"},Z=["src"];function ee(t,e,a,s,n,d){const m=o("RecycleScroller"),p=o("n-card");return l(),g(p,null,{default:i(()=>[c(m,{class:"scroller",items:t.sortedRecipeOptions,"item-size":32,"key-field":"value"},{default:i(({index:T,item:_})=>[r("div",Y,[r("img",{class:"item-icon",src:`/Icarus/ItemIcons/ITEM_${_.label}.png`,width:"30"},null,8,Z),r("span",null,v(_.label),1)])]),_:1},8,["items"])]),_:1})}var te=C(X,[["render",ee]]);const ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 352 512"},ne=c("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"},null,-1);var se=z({name:"Times",render:function(e,a){return l(),g("svg",ae,[ne])}});const oe={name:"CraftingToolManageTab",components:{Times:se},props:{tab:{type:Object,required:!0}},emits:["removeTab"],data(){return{}},computed:f({},w(b,["tabs","tabCount"])),methods:{removeTab(){this.$emit("removeTab",{tabId:this.tab.id})}}},ce={class:"manage-tab flex align-items-center p-2"},ie={class:"flex-grow-1 flex align-items-center"},re=S(" Delete Tab ");function le(t,e,a,s,n,d){const m=o("Times"),p=o("n-icon"),T=o("n-button"),_=o("n-tooltip");return l(),h("div",ce,[r("div",ie,[r("div",null,[F(r("input",{"onUpdate:modelValue":e[0]||(e[0]=I=>a.tab.title=I)},null,512),[[G,a.tab.title]])])]),t.tabCount>1?(l(),g(_,{key:0,trigger:"hover"},{trigger:i(()=>[c(T,{class:"",secondary:"",type:"error",onClick:d.removeTab},{default:i(()=>[c(p,{size:"20"},{default:i(()=>[c(m)]),_:1})]),_:1},8,["onClick"])]),default:i(()=>[re]),_:1})):P("",!0)])}var de=C(oe,[["render",le],["__scopeId","data-v-ffeace1c"]]);const ue={name:"CraftingToolCalculator",components:{},props:{tab:{type:Object,required:!0}},data(){return{}},computed:{},methods:{}};function _e(t,e,a,s,n,d){return l(),h("div")}var be=C(ue,[["render",_e]]);const x=b(),me={name:"CraftingToolTabView",components:{ManageTab:de,CraftingCalculator:be},props:[],data(){return{activeTabId:x.activeTabId,maxTabCount:20,addable:!0,closable:!0}},watch:{activeTabId:function(t){this.setActiveTab(t)}},computed:f({},w(b,["tabs","tabCount","activeTab"])),methods:k(f({},U(b,["addTab","setActiveTab"])),{handleAdd(){},handleClose(){},removeTab({tabId:t}={}){x.removeTab(t),this.activeTabId=x.activeTabId,this.$nextTick(()=>{var e;(e=this.$refs.tabsInstRef)==null||e.syncBarPosition()})}})},pe={class:"flex align-items-center mb-3"},fe={class:"flex align-items-center ml-auto"},ve={class:"mr-3"},he=r("span",null,"Add Tab",-1);function Te(t,e,a,s,n,d){const m=o("n-button"),p=o("manage-tab"),T=o("crafting-calculator"),_=o("n-tab-pane"),I=o("n-tabs"),O=o("n-card");return l(),h("div",null,[r("div",pe,[r("div",fe,[r("div",ve,v(t.tabCount)+" / "+v(n.maxTabCount),1),c(m,{class:"",strong:"",secondary:"",type:"primary",onClick:t.addTab,disabled:t.tabCount===n.maxTabCount},{default:i(()=>[he]),_:1},8,["onClick","disabled"])])]),c(O,null,{default:i(()=>{var y;return[S(v(n.activeTabId)+" - "+v((y=t.activeTab)==null?void 0:y.id)+" ",1),c(I,{ref:"tabsInstRef",value:n.activeTabId,"onUpdate:value":e[0]||(e[0]=u=>n.activeTabId=u),type:"bar",addable:n.addable,closable:n.closable,onClose:d.handleClose,onAdd:d.handleAdd,"tab-style":""},{default:i(()=>[(l(!0),h(H,null,J(t.tabs,u=>(l(),g(_,{tab:u.title,name:u.id,key:u.id},{default:i(()=>[c(p,{tab:u,onRemoveTab:d.removeTab},null,8,["tab","onRemoveTab"]),c(T,{class:"mt-4",tab:u},null,8,["tab"])]),_:2},1032,["tab","name"]))),128))]),_:1},8,["value","addable","closable","onClose","onAdd"])]}),_:1})])}var ge=C(me,[["render",Te]]);const Ce={class:"icarus-wrap flex flex-wrap"},ye={setup(t){return b().loadRecipeData(),(a,s)=>(l(),h("div",Ce,[c(ge,{class:"tab-view flex-1"}),c(te,{class:"item-selector"})]))}};export{ye as default};
